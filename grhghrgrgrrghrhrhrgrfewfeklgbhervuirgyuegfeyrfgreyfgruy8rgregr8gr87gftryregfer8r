
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- CONFIG: UserId -> {key, issuedDate}
local validUsers = {
	[9464607503] = {key = "NexaPremium_dngffvefgefug", issuedDate = "2025-10-18 21"}, -- yes
	[5464154339] = {key = "NexaPremium_dhueheuwuwduu", issuedDate = "2025-10-18 21"}, -- no
	[1444873051] = {key = "NexaPremium_6DB404IG", issuedDate = "2025-10-20 21"}, -- yes
	[7854965065] = {key = "NexaPremium_91F3YK69", issuedDate = "2025-10-22 21"}, -- yes
	[9529082141] = {key = "NexaPremium_91F3YK69", issuedDate = "2025-10-26 12"}, -- yes
	[2314101743] = {key = "NexaPremium_U9IMV3YW", issuedDate = "2025-10-31 14"}, -- yes
	[9348359815] = {key = "NexaPremium_NX81SW8V", issuedDate = "2025-11-2 14"}, -- yes
}

local expireAfter = 30 * 24 * 60 * 60 -- 30 hari

-- Helper: Parse date
local function parseDate(str)
	local y, m, d, h = str:match("(%d+)%-(%d+)%-(%d+) (%d+)")
	return os.time({year=tonumber(y), month=tonumber(m), day=tonumber(d), hour=tonumber(h)})
end

-- Check if player is allowed
local userData = validUsers[player.UserId]
if not userData then return end

local issuedTimestamp = parseDate(userData.issuedDate)
local expiredTimestamp = issuedTimestamp + expireAfter

-- GUI Key System
local playerGui = player:WaitForChild("PlayerGui")
if playerGui:FindFirstChild("KeyGui") then playerGui.KeyGui:Destroy() end

local screenGui = Instance.new("ScreenGui", playerGui)
screenGui.Name = "KeyGui"

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 350, 0, 0)
frame.Position = UDim2.new(0.5, 0, 1, 0)
frame.AnchorPoint = Vector2.new(0.5,0.5)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.BackgroundTransparency = 0.2
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,20)

TweenService:Create(frame, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
	Position = UDim2.new(0.5,0,0.5,0),
	Size = UDim2.new(0,350,0,230)
}):Play()

-- Title
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,30)
title.Position = UDim2.new(0,0,0,5)
title.BackgroundTransparency = 1
title.Text = "🔑 Key Verification"
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.TextColor3 = Color3.fromRGB(255,255,255)

-- TextBox
local textbox = Instance.new("TextBox", frame)
textbox.Size = UDim2.new(0.8,0,0,35)
textbox.Position = UDim2.new(0.1,0,0.3,0)
textbox.PlaceholderText = "Enter your key..."
textbox.TextColor3 = Color3.new(0,0,0)
textbox.BackgroundColor3 = Color3.fromRGB(255,255,255)
Instance.new("UICorner", textbox).CornerRadius = UDim.new(0,8)

-- Check Button
local checkBtn = Instance.new("TextButton", frame)
checkBtn.Size = UDim2.new(0.8,0,0,35)
checkBtn.Position = UDim2.new(0.1,0,0.65,0)
checkBtn.Text = "Check Key"
checkBtn.TextColor3 = Color3.fromRGB(255,255,255)
checkBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
Instance.new("UICorner", checkBtn).CornerRadius = UDim.new(0,8)

-- Result Label
local result = Instance.new("TextLabel", frame)
result.Size = UDim2.new(1,0,0,20)
result.Position = UDim2.new(0,0,1,-25)
result.BackgroundTransparency = 1
result.Text = ""
result.TextColor3 = Color3.new(1,0,0)
result.Font = Enum.Font.Gotham
result.TextSize = 16

-- Functions
local function formatRemaining(secs)
	if secs <= 0 then return "Expired" end
	local days = math.floor(secs/86400)
	local hours = math.floor((secs%86400)/3600)
	local mins = math.floor((secs%3600)/60)
	return string.format("%d hari %02d jam %02d menit", days,hours,mins)
end

checkBtn.MouseButton1Click:Connect(function()
	local input = tostring(textbox.Text):match("^%s*(.-)%s*$") or ""
	if input == "" then
		result.TextColor3 = Color3.fromRGB(255,100,100)
		result.Text = "❌ Masukkan key terlebih dahulu."
		return
	end
	
	if input == userData.key then
		local remainingTime = expiredTimestamp - os.time()
		if remainingTime <= 0 then
			result.TextColor3 = Color3.fromRGB(255,0,0)
			result.Text = "❌ Key expired. Tidak bisa load script."
			return
		end

		-- Key valid → hilangkan GUI
		result.TextColor3 = Color3.fromRGB(0,255,0)
		result.Text = "✅ Key valid! Loading script..."
		if screenGui then screenGui:Destroy() end

		-- Load Nexa Premium
		pcall(function()
			loadstring(game:HttpGet("https://raw.githubusercontent.com/fewnbhefbevfhevfdfveh/ckhsuciceifgeufhefveyfg/refs/heads/main/jduwgfPREMIUM"))()
		end)
	else
		result.TextColor3 = Color3.fromRGB(255,0,0)
		result.Text = "❌ Wrong key."
	end
end)
tambahin permanen key gini

	[9348359815] = {key = "NexaPremium_NX81SW8V", issuedDate = "Permanen"}, -- yes
